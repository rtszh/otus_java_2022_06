> ## otus_java_2022_06

> ### hw01-gradle

#### 1. Указание версии дистрибутива для gradlew

Указывается в файле _gradle/wrapper/gradle-wrapper.properties_

#### 2. buildSrc

_buildSrc_ - это служебный проект (модуль), который собирается первым. Таким образом, все содержимое _
buildSrc/build/libs/buildSrc.jar_ подкладывается в _Сlasspath_ проекта. В результате все классы и интерфейсы, собранные
в _buildSrc.jar_ будут доступны всему проекту.

#### 3. Использование buildSrc для указания версий в build.gradle

Одним из практических применений _buildSrc_ является указание всех версий заивисмостей для _build.gradle_ внутри _
buildSrc_. В данном примере, зависимость для guava подгружается синтаксисом:

```groovy
dependencies {
    dependency "com.google.guava:guava:${Versions.guava}"
}
```

Здесь ```${Versions.guava}``` подгружается из служебного модуля _buildSrc_.

#### 4. Сборка "толстого" jar'а

Одним из вариантов сборки "толстого" jar'а является применение плагина ```johnrengelman.shadow```:

```groovy
plugins {
    id 'com.github.johnrengelman.shadow' version '7.1.2' apply false
}
```

```apply false```  означает, что этот плагин не нужно применять к данному модулю (проекту) **(not to apply the plugin to
the current project)**

#### 5. Добавление нового модуля (проекта Gradle) в основной проект

В файле _settings.gradle_ нужно добавить команду вида ```include 'hw01-gradle'```, в которой
_'hw01-gradle'_ - это название модуля (проекта Gradle)


> ### hw06-annotations
#### Описание классов и аннотаций:
- _TestRunner_ - запускает тесты для всех классов, которые требуется протестировать
- _TestProcessor_ - в этом классе:
  1. осуществляется получение информации о классе, который требуется протестировать;
  2. запускаются тесты для каждого класса, который требуется протестировать;
  3. подсчитывается статистика какие тесты прошли, а какие провалились для каждого тестируемого класса;
- _TestList, TestList2_ - примеры тестируемых классов;
- _Statistics_ - класс, который содержит статистику для каждого отдельного тестируемого класса
- _Before, Test, After_ - аннотации, которые "навешиваются" на методы тестируемого класса

> ### hw08-garbage collector
#### Дополнитиельные источники
https://habr.com/ru/post/269621/
https://docs.oracle.com/en/java/javase/17/gctuning/ergonomics.html#GUID-83551BA5-ADEA-4E2E-B60A-3A953DA8FD02
#### Факторы, учитываемые при работе сборщика мусора:
- _Throughput (Пропускная способность)_ - отношение, в котором:
  - числитель - время работы программы;
  - знаменатель - время работы программы с учетом всех остановок на garbage collect (на сборку мусора)
- _Latency (Максимальная задержка)_ - максимальное время, на которое сборщик приостанавливает выполнение программы для выполнения одной сборки. Такие остановки называются stop-the-world (или STW) 
- _Footprint (Потребляемые ресурсы)_ - объем ресурсов процессора и/или дополнительной памяти, потребляемых сборщиком

#### VM options
##### Логирование
1) -verbose:gc - включает логирование сборок мусора в stdout
2) -Xloggc:filename - указывает имя файла, в который должна логироваться информация о сборках мусора. Имеет приоритет над -verbose:gc.
3) -XX:+PrintGCTimeStamps - добавляет к информации о сборках временные метки (в виде количества секунд, прошедших с начала работы программы)
4) -XX:+PrintGCDetails - включает расширенный вывод информации о сборках мусора.
5) -XX:+PrintFlagsFinal - при старте приложения выводит в stdout значения всех опций, заданных явно или установленных самой JVM. Сюда же попадают опции, относящиеся к сборке мусора. Часто бывает полезно посмотреть на присвоенные им значения.
6) -XX:+HeapDumpOnOutOfMemoryError - добавить в dump-файл логи, связанные с OutOfMemoryError
7) -XX:HeapDumpPath=./logs/dump - путь к файлу, в котором будет сохранен dump
8) -Xlog:gc=debug:file=./logs/gc-%p- %t.log:tags,uptime,time,level:filecount=5,filesize=10m

##### Настройки heap'а
1) -Xms256m - начальный размер heap'а. В данном случае - 256 mb;
2) -Xmx256m - максимальный размер heap'а. В данном случае - 256 mb;
3) -XX:+UseSerialGC - явно задает использование gc типа SerialGC в приложении
4) -XX:+UseG1GC - явно задает использование gc типа G1GC в приложении
Остальные типы GC, которые можно задать - см на сайте oracle

